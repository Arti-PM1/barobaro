# 🚀 Nexus-AI 개발 및 배포 워크플로우 (v2.0)

이 문서는 Nexus-AI 프로젝트의 **코드 작성부터 배포까지의 전체 수명 주기**를 규정합니다.
모든 개발자는 이 워크플로우를 철저히 준수하여, **코드(Code), 문서(Docs), 변경 이력(Changelog)**이 항상 완벽하게 동기화된 상태(Single Source of Truth)를 유지해야 합니다.

---

## 🛠 1. 개발 단계 (Development Phase)

### 1.1. 기능 구현 및 수정
- **UI/UX**: `DESIGN_SYSTEM.md`의 가이드를 준수하여 컴포넌트를 개발합니다.
- **AI 기능**: `services/prompts.ts`의 `AI_FEATURES` 배열에 새로운 프롬프트를 등록하거나 수정합니다. (이곳이 AI 기능의 **유일한 진실 공급원**입니다.)
- **타입 정의**: `types.ts`에 인터페이스를 명확히 정의합니다.

### 1.2. 로컬 검증
- `npm run dev`로 로컬 서버를 실행하여 기능을 확인합니다.
- `npx tsc --noEmit`을 실행하여 타입 오류가 없는지 검증합니다.

---

## 📦 2. 커밋 단계 (Commit Phase)

**커밋 메시지는 릴리즈 노트의 핵심 재료입니다.** 대충 작성하지 말고, 사용자가 읽을 변경 로그라고 생각하고 작성해야 합니다.

### 2.1. 커밋 메시지 작성 규칙
릴리즈 스크립트는 **가장 마지막 커밋 메시지**를 파싱하여 `changelog.json`에 자동으로 기입합니다.

```bash
git commit -m "feat(scope): 릴리즈 제목 (간결하고 명확하게)" -m "
여기에 마크다운 형식으로 상세 내용을 작성합니다.

### ✨ 주요 변경 사항
- **기능 A 추가**: 사용자가 무엇을 할 수 있게 되었는지 설명.
- **UI 개선**: 어떤 부분이 시각적으로 변경되었는지 설명.

### 🔧 기술적 사항
- \`SomeService\` 리팩토링을 통해 성능 20% 향상.
- 관련 이슈: #123
"
```

*   **제목(Subject)**: `feat`, `fix`, `chore`, `refactor` 등의 접두어를 사용합니다. 이 줄이 Changelog의 `title`이 됩니다.
*   **본문(Body)**: Changelog의 `description`이 됩니다. **HTML 태그가 아닌 마크다운 문법**을 사용하세요. (스크립트가 자동으로 변환하거나 UI에서 렌더링합니다.)

---

## 🚀 3. 릴리즈 및 배포 단계 (Release & Deploy Phase)

개발자가 기능을 완성하고 커밋을 마쳤다면, 배포는 다음 명령어로 시작합니다.

**"워크플로우에 따라 배포해줘"** 또는 **"릴리즈 해줘"**

### 3.1. 자동화 스크립트 실행 순서 (AI 어시스턴트 수행)

1.  **문서 최신화 (`npm run gen:docs`)**
    *   `services/prompts.ts` 등의 코드를 분석하여 `docs/AI_FEATURES.md` 문서를 재생성합니다.
    *   **목적**: 코드가 수정되면 문서도 즉시 반영되어야 합니다.

2.  **릴리즈 준비 (`npm run release`)**
    *   `git log -1`을 통해 최신 커밋 메시지(제목, 본문)를 가져옵니다.
    *   `package.json`의 버전을 Patch 업그레이드합니다. (e.g., `1.8.3` -> `1.8.4`)
    *   **`data/changelog.json`에 새 버전을 추가합니다.** (가장 중요한 단계)
    *   *주의*: 만약 커밋 메시지가 부실하다면, 이 단계에서 AI가 내용을 보강하여 `changelog.json`을 수정해야 합니다.

3.  **릴리즈 커밋 (`git commit`)**
    *   자동 변경된 파일들(`package.json`, `data/changelog.json`, `docs/...`)을 묶어서 커밋합니다.
    *   메시지: `chore(release): bump to v1.8.4`

4.  **빌드 및 검증 (`npm run build`)**
    *   프로덕션 빌드를 수행하여 에러가 없는지 최종 확인합니다.

5.  **원격 푸시 및 배포 (`git push` & Deploy)**
    *   `git push origin main`으로 코드를 저장소에 동기화합니다.
    *   (옵션) `firebase deploy`를 실행하여 실제 서버에 배포합니다.

---

## 🚨 4. 비상 대응 (Emergency Rollback)

배포 후 심각한 버그가 발견되었을 경우:

1.  `git revert HEAD`로 릴리즈 커밋을 되돌립니다.
2.  `data/changelog.json`에서 해당 버전 항목을 수동으로 제거하거나 `[Withdrawn]` 태그를 붙입니다.
3.  수정 후 다시 2번 단계부터 진행합니다.

---

## ✅ 체크리스트 (개발자 필독)

- [ ] 기능을 추가했으면 `AI_FEATURES` 레지스트리도 업데이트했는가?
- [ ] 커밋 메시지 본문에 릴리즈 노트에 들어갈 상세 내용을 마크다운으로 작성했는가?
- [ ] 배포 요청 전 로컬에서 기능이 정상 작동하는지 확인했는가?
